<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
    <!-- ì§ˆë¬¸ -->
    <h2 class="border-bottom py-2" th:text="${question.subject}"></h2>
    <div class="card my-3">
        <div class="card-body">
			<div class="card-text" th:utext="${@commonUtil.markdown(question.content)}"></div>
			 <div class="d-flex justify-content-end">
                <div class="badge bg-light text-dark p-2 text-start">
                    <div th:text="${#temporals.format(question.createDate, 'yyyy-MM-dd HH:mm')}"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- ë‹µë³€ì˜ ê°¯ìˆ˜ í‘œì‹œ -->
    <div class="count-heart d-flex justify-content-start align-items-center">
        <!-- ì¢‹ì•„ìš” -->
        <h5 class="my-3 py-2 me-3 d-flex align-items-center">
            <button id="like-button" class="btn d-flex align-items-center no-focus">
                <span class="me-2">â¤ï¸</span> <!-- í•˜íŠ¸ ì´ëª¨í‹°ì½˜ -->
                <span id="like-count"></span> <!-- ì¢‹ì•„ìš” ê°¯ìˆ˜ í‘œì‹œ -->
            </button>
        </h5>
    
        <!-- ëŒ“ê¸€ -->
        <h5 class="my-3 py-2 d-flex align-items-center">
            <span class="me-2">ğŸ’¬</span> <!-- ëŒ“ê¸€ ì´ëª¨í‹°ì½˜ -->
            <span th:text="|ëŒ“ê¸€ ${#lists.size(question.answerList)}|"></span>
        </h5>
    </div>
    <!-- ë‹µë³€ ë°˜ë³µ ì‹œì‘ -->
    <div th:each="answer : ${question.answerList}">
        <div class="d-flex align-items-start py-3">
            <!-- ëŒ“ê¸€ ë‚´ìš© -->
            <div>
                <p class="mb-1" th:utext="${@commonUtil.markdown(answer.content)}"></p>
            </div>
        </div>
        <hr class="my-3"> <!-- ëŒ“ê¸€ êµ¬ë¶„ì„  -->
    </div>

    <!-- ë‹µë³€ ë°˜ë³µ ë  -->
	<!-- ë‹µë³€ ì‘ì„± -->
	<!-- <form th:action="@{|/notice/answer/create/${question.id}|}" th:object="${noticeAnswerForm}" method="post" class="my-3">
	        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
	        <textarea th:field="*{content}" rows="10" class="form-control"></textarea>
	        <input type="submit" value="ë‹µë³€ë“±ë¡" class="btn btn-primary my-2">
	</form> -->
    <form th:action="@{|/notice/answer/create/${question.id}|}" th:object="${noticeAnswerForm}" method="post" class="my-5">
        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
        <!-- ëŒ“ê¸€ ì…ë ¥ ë°•ìŠ¤ -->
        <div class="card">
            <div class="card-body">
                <textarea 
                    th:field="*{content}" 
                    rows="3" 
                    class="form-control border-0"
                    placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”." 
                    style="resize: none; background-color: #ffffff;"></textarea>
                <div class="text-end mt-2">
                    <input 
                        type="submit" 
                        value="ëŒ“ê¸€ë‹¬ê¸°" 
                        class="btn btn-outline-secondary px-4 py-1" 
                        style="border-radius: 20px;">
                </div>
            </div>
        </div>
    </form>
    
    <script>
        // ì´ˆê¸° ì¢‹ì•„ìš” ìˆ˜ ê°€ì ¸ì˜¤ê¸°
        const likeButton = document.getElementById("like-button");
        const likeCountSpan = document.getElementById("like-count");
    
        // ë¡œì»¬ ì €ì¥ì†Œì—ì„œ ì¢‹ì•„ìš” ê°’ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ 0ìœ¼ë¡œ ì´ˆê¸°í™”)
        let likeCount = localStorage.getItem("likeCount") ? parseInt(localStorage.getItem("likeCount")) : 0;
        likeCountSpan.textContent = `ì¢‹ì•„ìš” ${likeCount}`;
    
        // ë²„íŠ¼ í´ë¦­ ì‹œ ì¢‹ì•„ìš” ìˆ˜ ì¦ê°€ ë° ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥
        likeButton.addEventListener("click", function () {
            likeCount += 1; // ì¢‹ì•„ìš” ìˆ˜ ì¦ê°€
            localStorage.setItem("likeCount", likeCount); // ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥
            likeCountSpan.textContent = `ì¢‹ì•„ìš” ${likeCount}`; // ì¢‹ì•„ìš” ê°¯ìˆ˜ ì—…ë°ì´íŠ¸
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script th:src="@{/upload.js}"></script>
	</html>